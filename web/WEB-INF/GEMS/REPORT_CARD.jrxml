<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.10.0.final using JasperReports Library version 6.10.0-unknown  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="REPORT_CARD" pageWidth="905" pageHeight="1200" columnWidth="865" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="e5508cc2-e421-467b-b3fa-21591f2df04f">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="GEMS"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="0"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="1000"/>
	<property name="com.jaspersoft.studio.property.dataset.dialog.DatasetDialog.sash.w1" value="655"/>
	<property name="com.jaspersoft.studio.property.dataset.dialog.DatasetDialog.sash.w2" value="331"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<style name="Crosstab_CH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab_CT" mode="Opaque" backcolor="#005FB3">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab_CD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 1_CH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 1_CG" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 1_CT" mode="Opaque" backcolor="#005FB3">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 1_CD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 3_CH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 3_CG" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 3_CT" mode="Opaque" backcolor="#005FB3">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 3_CD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Style1">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{course_name}.compareTo( "French(G02)" )==0]]></conditionExpression>
			<style backcolor="#FFFFFF"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[($V{student_grade_in_category_MEASURE}/25)==4]]></conditionExpression>
			<style mode="Opaque" forecolor="#000000" backcolor="#0099FF"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[($V{student_grade_in_category_MEASURE}/25)==3]]></conditionExpression>
			<style mode="Opaque" backcolor="#00CC66"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[($V{student_grade_in_category_MEASURE}/25)==2]]></conditionExpression>
			<style mode="Opaque" backcolor="#FFFF66"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[($V{student_grade_in_category_MEASURE}/25)<2]]></conditionExpression>
			<style mode="Opaque" backcolor="#FF0033"/>
		</conditionalStyle>
	</style>
	<style name="Style2">
		<conditionalStyle>
			<conditionExpression><![CDATA[($V{student_grade_in_category_MEASURE})>84]]></conditionExpression>
			<style mode="Opaque" forecolor="#000000" backcolor="#0099FF"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[($V{student_grade_in_category_MEASURE})>64]]></conditionExpression>
			<style mode="Opaque" backcolor="#00CC66"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[($V{student_grade_in_category_MEASURE})>49]]></conditionExpression>
			<style mode="Opaque" backcolor="#FFFF66"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[($V{student_grade_in_category_MEASURE})<49]]></conditionExpression>
			<style mode="Opaque" backcolor="#FF0033"/>
		</conditionalStyle>
	</style>
	<style name="Crosstab 4_CH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 4_CG" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 4_CT" mode="Opaque" backcolor="#005FB3">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 4_CD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 2_CH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 2_CG" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 2_CT" mode="Opaque" backcolor="#005FB3">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab 2_CD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="category_grade" uuid="ad877799-03d5-4c57-891f-6d19b41f23ee">
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="GEMS"/>
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="0"/>
		<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="1000"/>
		<parameter name="student_id" class="java.lang.Integer"/>
		<parameter name="MAIN_GRADING_PERIOD_ID" class="java.lang.String">
			<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[select *, avg(s.final_grade) as emo_grade from (select grades_summaries.*, levels.level_code, courses.order,courses.total_grade , 
IF(courses.report_display_name IS NULL, SUBSTRING_INDEX(courses.name, "(", 1), courses.report_display_name) AS course_name1, 
(student_grade_in_category*total_grade)/main_category_weight as final_grade
from grades_summaries

inner join levels on levels.id = level_id 
inner join courses on course_id = courses.id and courses.calculated_in_total = 0 and hide =0
where student_id =  $P{student_id}  and main_grading_period_weight > 0 
and (grades_summaries.main_grading_period_id in ($P!{MAIN_GRADING_PERIOD_ID}) OR $P{MAIN_GRADING_PERIOD_ID}  = "-1")
group by course_name, main_grading_period_id)s
group by s.student_id, s.course_id]]>
		</queryString>
		<field name="id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="student_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="student_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="academic_year_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="academic_year_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="academic_year_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="academic_year_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="course_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="course_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="course_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="course_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="main_grading_period_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="main_grading_period_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="main_grading_period_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="main_grading_period_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="main_grading_period_weight" class="java.lang.Float">
			<property name="com.jaspersoft.studio.field.label" value="main_grading_period_weight"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="sub_grading_period_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="sub_grading_period_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="sub_grading_period_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="sub_grading_period_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="sub_grading_period_weight" class="java.lang.Float">
			<property name="com.jaspersoft.studio.field.label" value="sub_grading_period_weight"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="main_category_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="main_category_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="main_category_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="main_category_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="main_category_weight" class="java.lang.Float">
			<property name="com.jaspersoft.studio.field.label" value="main_category_weight"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="sub_category_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="sub_category_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="sub_category_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="sub_category_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="sub_category_weight" class="java.lang.Float">
			<property name="com.jaspersoft.studio.field.label" value="sub_category_weight"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_grade_in_sub_category" class="java.lang.Float">
			<property name="com.jaspersoft.studio.field.label" value="student_grade_in_sub_category"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_grade_in_category" class="java.lang.Float">
			<property name="com.jaspersoft.studio.field.label" value="student_grade_in_category"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_grade_in_sub_grading_period" class="java.lang.Float">
			<property name="com.jaspersoft.studio.field.label" value="student_grade_in_sub_grading_period"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_grade_in_main_grading_period" class="java.lang.Float">
			<property name="com.jaspersoft.studio.field.label" value="student_grade_in_main_grading_period"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="created_at" class="java.time.LocalDateTime">
			<property name="com.jaspersoft.studio.field.label" value="created_at"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="updated_at" class="java.time.LocalDateTime">
			<property name="com.jaspersoft.studio.field.label" value="updated_at"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_name_in_arabic" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="student_name_in_arabic"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_address" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="student_address"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_gender" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="student_gender"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_username" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="student_username"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_nationality" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="student_nationality"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_date_of_birth" class="java.sql.Date">
			<property name="com.jaspersoft.studio.field.label" value="student_date_of_birth"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="student_status" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="student_status"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="section_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="section_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="section_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="section_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="level_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="level_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="level_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="level_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="course_group_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="course_group_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="course_group_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="course_group_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="course_display_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="course_display_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="course_order" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="course_order"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="course_show_in_certificate" class="java.lang.Boolean">
			<property name="com.jaspersoft.studio.field.label" value="course_show_in_certificate"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="course_include_in_total" class="java.lang.Boolean">
			<property name="com.jaspersoft.studio.field.label" value="course_include_in_total"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="course_deleted_at" class="java.time.LocalDateTime">
			<property name="com.jaspersoft.studio.field.label" value="course_deleted_at"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
		</field>
		<field name="level_code" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="level_code"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="levels"/>
		</field>
		<field name="order" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="order"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="courses"/>
		</field>
		<field name="total_grade" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="total_grade"/>
		</field>
		<field name="course_name1" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="course_name1"/>
		</field>
		<field name="final_grade" class="java.lang.Double">
			<property name="com.jaspersoft.studio.field.label" value="final_grade"/>
		</field>
		<field name="emo_grade" class="java.lang.Double">
			<property name="com.jaspersoft.studio.field.label" value="emo_grade"/>
		</field>
		<sortField name="order"/>
	</subDataset>
	<subDataset name="char2" uuid="a9d28d1e-da5d-4dd3-9183-25b039cba09a">
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="GEMS"/>
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<parameter name="student_id" class="java.lang.String"/>
		<parameter name="level_code" class="java.lang.String"/>
		<parameter name="MAIN_GRADING_PERIOD_ID" class="java.lang.String">
			<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
		</parameter>
		<parameter name="STUDENT_ID" class="java.lang.String">
			<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
		</parameter>
		<parameter name="LEVEL_CODE" class="java.lang.String">
			<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
		</parameter>
		<parameter name="SUB_GRADING_PERIOD_ID" class="java.lang.String">
			<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[select "Student AVG" as average_type , ((sum((s.student_grade_in_main_grading_period * 100)/s.main_grading_period_weight)/count(distinct s.course_id))/count(distinct s.main_grading_period_id)) AS  avrerage 
from (select grades_summaries.*,levels.level_code, courses.calculated_in_total, courses.hide from (select 
student_id,
student_name, 
level_id,
level_name,   
course_id,
course_name,    
main_grading_period_id,
main_grading_period_name,  
main_grading_period_weight,
main_category_id,
main_category_name,
main_category_weight,
course_group_name,
(((sum(student_grade_in_category)*main_grading_period_weight)/100)
+COALESCE((select grade/4 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
where category_id = 19 and gi.deleted_at is null
and gss.student_id = s.student_id and gss.course_id = s.course_id and gi.grading_period_id = s.main_grading_period_id),0)) as student_grade_in_main_grading_period,
academic_year_name  
from (SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    (total_grade*gs.main_category_weight)/total_max_grade as student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs

left join (SELECT 
student_id,
grading_period_id,
course_id,
course_name,
SUM(max_grade) AS total_max_grade,
SUM(grade) AS total_grade
FROM (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select * from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
ORDER BY s.student_id,grading_period_id, s.course_id, (s.grade*100)/max_grade DESC)s
)s
) ranked
WHERE ranked.rank <= (SELECT CEIL(COUNT(*) / 2) from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
where s.grading_period_id = ranked.grading_period_id
AND s.student_id = ranked.student_id AND s.course_id = ranked.course_id
GROUP BY s.student_id, s.course_id, s.grading_period_id
ORDER BY s.student_id, grading_period_id, s.course_id, s.grade DESC)
GROUP BY student_id, grading_period_id, course_id, course_name
ORDER BY student_id, grading_period_id, course_id
)q_grade on q_grade.course_id = gs.course_id and q_grade.student_id = gs.student_id and q_grade.grading_period_id = gs.main_grading_period_id
where main_category_id = 8 


union all 

SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs
where main_category_id != 8 
group by student_id, course_id,main_grading_period_id, main_category_id)s
group by student_id, course_id,main_grading_period_id
ORDER BY level_id,student_id, course_id, main_grading_period_id, main_category_id
) grades_summaries 
inner join levels on level_id = levels.id 
inner join courses on course_id = courses.id and courses.calculated_in_total =1 and courses.hide = 0
where student_id =  $P{STUDENT_ID}
and (grades_summaries.main_grading_period_id in ($P!{MAIN_GRADING_PERIOD_ID}) OR $P{MAIN_GRADING_PERIOD_ID}  = "-1")
group by main_grading_period_id, student_id, course_id)s



group by s.student_id
union
select "School AVG" as average_type, round((sum(f.avrerage)/count(f.student_id)),0) as avrerage from (select s.student_id, (sum((s.student_grade_in_main_grading_period * 100)/s.main_grading_period_weight)/count(distinct s.course_id))/count(distinct s.main_grading_period_id) AS  avrerage 
from (select grades_summaries.*,levels.level_code, courses.calculated_in_total, courses.hide from (select 
student_id,
student_name, 
level_id,
level_name,   
course_id,
course_name,    
main_grading_period_id,
main_grading_period_name,  
main_grading_period_weight,
main_category_id,
main_category_name,
main_category_weight,
course_group_name,
(((sum(student_grade_in_category)*main_grading_period_weight)/100)
+COALESCE((select grade/4 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
where category_id = 19 and gi.deleted_at is null
and gss.student_id = s.student_id and gss.course_id = s.course_id and gi.grading_period_id = s.main_grading_period_id),0)) as student_grade_in_main_grading_period,
academic_year_name  
from (SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    (total_grade*gs.main_category_weight)/total_max_grade as student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs

left join (SELECT 
student_id,
grading_period_id,
course_id,
course_name,
SUM(max_grade) AS total_max_grade,
SUM(grade) AS total_grade
FROM (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select * from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
ORDER BY s.student_id, s.course_id, (s.grade*100)/max_grade DESC)s
)s
) ranked
WHERE ranked.rank <= (SELECT CEIL(COUNT(*) / 2) from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
where s.grading_period_id = ranked.grading_period_id
AND s.student_id = ranked.student_id AND s.course_id = ranked.course_id
GROUP BY s.student_id, s.course_id, s.grading_period_id
ORDER BY s.student_id, s.course_id, s.grade DESC)
GROUP BY student_id, grading_period_id, course_id, course_name
ORDER BY student_id, course_id
)q_grade on q_grade.course_id = gs.course_id and q_grade.student_id = gs.student_id and q_grade.grading_period_id = gs.main_grading_period_id
where main_category_id = 8 


union all 

SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs
where main_category_id != 8 
group by student_id, course_id,main_grading_period_id, main_category_id)s
group by student_id, course_id,main_grading_period_id
ORDER BY level_id,student_id, course_id, main_grading_period_id, main_category_id
) grades_summaries 
inner join levels on level_id = levels.id and levels.level_code =  $P{LEVEL_CODE} 
inner join courses on course_id = courses.id and courses.calculated_in_total =1 and courses.hide = 0
and (grades_summaries.main_grading_period_id in ($P!{MAIN_GRADING_PERIOD_ID}) OR $P{MAIN_GRADING_PERIOD_ID}  = "-1")
group by main_grading_period_id, student_id, course_id)s
group by s.student_id)f]]>
		</queryString>
		<field name="average_type" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="average_type"/>
		</field>
		<field name="avrerage" class="java.lang.Double">
			<property name="com.jaspersoft.studio.field.label" value="avrerage"/>
		</field>
	</subDataset>
	<subDataset name="chart1" uuid="0ac3133c-5869-4ccd-829e-b7d1651cea1c">
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="GEMS"/>
		<parameter name="student_id" class="java.lang.String"/>
		<parameter name="MAIN_GRADING_PERIOD_ID" class="java.lang.String">
			<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
		</parameter>
		<parameter name="STUDENT_ID" class="java.lang.String">
			<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
		</parameter>
		<parameter name="LEVEL_CODE" class="java.lang.String">
			<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
		</parameter>
		<parameter name="SUB_GRADING_PERIOD_ID" class="java.lang.String">
			<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
		</parameter>
		<queryString language="SQL">
			<![CDATA[select s.student_id, 

CASE 
        WHEN s.main_grading_period_id = 1 THEN 'Q1'
        WHEN s.main_grading_period_id = 2 THEN 'Q2'
        WHEN s.main_grading_period_id = 3 THEN 'Q3'
        WHEN s.main_grading_period_id = 4 THEN 'Q4'
        ELSE 'Unknown'
    END AS main_grading_period_name


, sum(round((s.student_grade_in_main_grading_period * 100)/s.main_grading_period_weight)) /count(s.course_id) as total_quarter
from (select grades_summaries.*,levels.level_code, courses.calculated_in_total, courses.hide from (select 
student_id,
student_name, 
level_id,
level_name,   
course_id,
course_name,    
main_grading_period_id,
main_grading_period_name,  
main_grading_period_weight,
main_category_id,
main_category_name,
main_category_weight,
course_group_name,
(((sum(student_grade_in_category)*main_grading_period_weight)/100)
+COALESCE((select grade/4 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
where category_id = 19 and gi.deleted_at is null
and gss.student_id = s.student_id and gss.course_id = s.course_id and gi.grading_period_id = s.main_grading_period_id),0)) as student_grade_in_main_grading_period,
academic_year_name  
from (SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    (total_grade*gs.main_category_weight)/total_max_grade as student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs

left join (SELECT 
student_id,
grading_period_id,
course_id,
course_name,
SUM(max_grade) AS total_max_grade,
SUM(grade) AS total_grade
FROM (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select * from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
ORDER BY s.student_id, grading_period_id, s.course_id, (s.grade*100)/max_grade DESC)s
)s
) ranked
WHERE ranked.rank <= (SELECT CEIL(COUNT(*) / 2) from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
where s.grading_period_id = ranked.grading_period_id
AND s.student_id = ranked.student_id AND s.course_id = ranked.course_id
GROUP BY s.student_id, s.course_id, s.grading_period_id
ORDER BY s.student_id, grading_period_id,  s.course_id, s.grade DESC)
GROUP BY student_id, grading_period_id, course_id, course_name
ORDER BY student_id, grading_period_id, course_id
)q_grade on q_grade.course_id = gs.course_id and q_grade.student_id = gs.student_id and q_grade.grading_period_id = gs.main_grading_period_id
where main_category_id = 8 


union all 

SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs
where main_category_id != 8 
group by student_id, course_id,main_grading_period_id, main_category_id)s
group by student_id, course_id,main_grading_period_id
ORDER BY level_id,student_id, course_id, main_grading_period_id, main_category_id
) grades_summaries 
inner join levels on level_id = levels.id and levels.level_code =  $P{LEVEL_CODE} 
inner join courses on course_id = courses.id and courses.calculated_in_total = 1 and courses.hide = 0
where student_id =    $P{student_id} 
and (grades_summaries.main_grading_period_id in ($P!{MAIN_GRADING_PERIOD_ID}) OR $P{MAIN_GRADING_PERIOD_ID}  = "-1")
group by main_grading_period_id, student_id, course_id)s
group by s.student_id, s.main_grading_period_id]]>
		</queryString>
		<field name="student_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="student_id"/>
		</field>
		<field name="main_grading_period_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="main_grading_period_name"/>
		</field>
		<field name="total_quarter" class="java.lang.Double">
			<property name="com.jaspersoft.studio.field.label" value="total_quarter"/>
		</field>
	</subDataset>
	<subDataset name="Fail_student" uuid="6564efee-19b6-44fe-ab66-ad918a24cb20">
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="GEMS"/>
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<parameter name="Parameter1" class="java.lang.String"/>
		<parameter name="Parameter2" class="java.lang.String"/>
		<queryString>
			<![CDATA[select student_id, student_name, group_concat(course_name), level_code from (select student_id, student_name, group_concat(course_name) as course_name, level_code from (select (select school_description from schools limit 1) as school_name, b.*, round(a.year_avrg,0),
(SELECT /*+ NO_BNL() */ grade as SECTION
  FROM scale_grades
  WHERE  SCALE_ID = 842 and deleted_at is null
and  
round(a.year_avrg,0)
 between low and 
  case when high >= 100 THEN 1000000 else high - 0.5 end
  ) AS year_LETTER
  ,a.year_avrg, c.course_letter, c.course_grade
  from
  
/*STUDENT_GRADE*/
  (select grades_summaries.*, levels.level_code, courses.calculated_in_total, courses.pass_limit
  
,(SELECT /*+ NO_BNL() */ grade as SECTION
  FROM scale_grades
  WHERE  SCALE_ID =   842 and deleted_at is null
and  
round(((student_grade_in_sub_grading_period*100)/sub_grading_period_weight),0)
 between low and 
  case when high >= 100 THEN 1000000 else high - 0.5 end
  ) AS LETTER, courses.order,
  
  round(((student_grade_in_sub_grading_period*100)/sub_grading_period_weight),0) as Quarter_grade
  
  from grades_summaries
inner join levels on levels.id = level_id
inner join courses on courses.id = grades_summaries.course_id and courses.calculated_in_total = 1 and courses.hide = 0
inner join users on users.deleted_at is null and users.actable_id = grades_summaries.student_id and users.user_type = "student" 
where student_id = $P{Parameter1} 
group by student_id, course_id, sub_grading_period_id)b

/*STUDENT_GRADE*/


/*YEAR_AVG*/

inner join (select a.student_name, a.student_id, 
(sum((a.student_grade_in_sub_grading_period*100)/a.sub_grading_period_weight)/count(distinct a.sub_grading_period_id))/ count(distinct a.course_id) as year_avrg
from 
(select grades_summaries.*, levels.level_code from grades_summaries
inner join levels on levels.id = level_id 
inner join courses on courses.id = course_id and courses.calculated_in_total = 1 and courses.hide = 0
inner join users on users.deleted_at is null and users.actable_id = grades_summaries.student_id and users.user_type = "student" 
where student_id = $P{Parameter1} 
group by student_id, course_id, sub_grading_period_id)a
group by a.student_id)a on a.student_id = b.student_id

/*YEAR_AVG*/

/*COURSE_LETTER*/
inner join (select a.student_name, a.student_id, a.course_id, a.course_name, 

(SELECT /*+ NO_BNL() */ grade as SECTION
  FROM scale_grades
  WHERE  SCALE_ID =   842 and deleted_at is null
and  
round(sum((a.student_grade_in_sub_grading_period)*100/a.sub_grading_period_weight)/count(sub_grading_period_id) ,0)
 between low and 
  case when high >= 100 THEN 1000000 else high - 0.5 end
  ) AS course_letter,
  sum((a.student_grade_in_sub_grading_period)*100/a.sub_grading_period_weight)/count(sub_grading_period_id) as course_grade
from (select grades_summaries.*, levels.level_code from grades_summaries
inner join levels on levels.id = level_id 
inner join courses on courses.id = course_id and courses.calculated_in_total = 1 and courses.hide =0 
inner join users on users.deleted_at is null and users.actable_id = grades_summaries.student_id and users.user_type = "student"
where student_id = $P{Parameter1} 
group by student_id, course_id, sub_grading_period_id ) a
group by student_id, course_id)c on c.course_id = b.course_id and c.student_id = b.student_id

/*COURSE_LETTER*/

inner join courses on c.course_id = courses.id and courses.deleted_at is null
where course_letter = "F"
group by student_id, course_id
)s

union all

select student_id,student_name, course_name, levels.level_code
from grades_summaries
inner join levels on levels.id = level_id 
inner join courses on course_id = courses.id and courses.calculated_in_total = 0 and hide =0
where student_id = $P{Parameter1}  and main_grading_period_weight > 0 and (main_grading_period_weight = 100 or (course_name = 'French(G02)' and sub_grading_period_id =3)) and main_category_weight >0
and student_grade_in_category <50 and course_name != 'French(G02)'
group by student_id, course_name)s]]>
		</queryString>
		<field name="student_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="student_id"/>
		</field>
		<field name="student_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="student_name"/>
		</field>
		<field name="group_concat(course_name)" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="group_concat(course_name)"/>
		</field>
		<field name="level_code" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="level_code"/>
		</field>
	</subDataset>
	<parameter name="LETTER_ID" class="java.lang.String"/>
	<parameter name="MAIN_GRADING_PERIOD_ID" class="java.lang.String">
		<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
	</parameter>
	<parameter name="STUDENT_ID" class="java.lang.String">
		<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
	</parameter>
	<parameter name="LEVEL_CODE" class="java.lang.String">
		<defaultValueExpression><![CDATA["-1"]]></defaultValueExpression>
	</parameter>
	<parameter name="GPA_ID" class="java.lang.String"/>
	<parameter name="ABSOLUTE_PATH" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="USER_ID" class="java.lang.String"/>
	<queryString>
		<![CDATA[select
(select school_description from schools limit 1) as school_name,
users.actable_id as student_id, users.name as student_name,
levels.id as level_id, levels.name as level_name, levels.level_code,
SUBSTRING(students.batch_name, LENGTH(students.batch_name), 1) AS class, gs.course_group_name,
gs.main_grading_period_id, 

CASE 
        WHEN gs.main_grading_period_id = 1 THEN 'Q1'
        WHEN gs.main_grading_period_id = 2 THEN 'Q2'
        WHEN gs.main_grading_period_id = 3 THEN 'Q3'
        WHEN gs.main_grading_period_id = 4 THEN 'Q4'
        ELSE 'Unknown'
    END AS main_grading_period_name
,

report_display_name,
courses.id as course_id, courses.name as course_name,
((student_grade_in_main_grading_period/main_grading_period_weight) * 100) as student_grade,
gs.academic_year_name,
(SELECT /*+ NO_BNL() */ grade as SECTION
  FROM scale_grades
  WHERE  SCALE_ID =    $P{LETTER_ID} and deleted_at is null
and  
round(sum((gs.student_grade_in_main_grading_period)*100/gs.main_grading_period_weight)/count(gs.main_grading_period_id) ,0)
 between low and 
  case when high >= 100 THEN 1000000 else high - 0.5 end
  ) AS period_letter,
  
c.course_grade, c.course_letter, courses.order,
k.year_avrg as year_grade,

(SELECT /*+ NO_BNL() */ grade as SECTION
  FROM scale_grades
  WHERE  SCALE_ID =    $P{LETTER_ID} and deleted_at is null
and  
round(k.year_avrg)
 between low and 
  case when high >= 100 THEN 1000000 else high - 0.5 end
  ) AS year_letter
  
  
from (select 
student_id,
student_name, 
level_id,
level_name,   
course_id,
course_name,    
main_grading_period_id,
main_grading_period_name,  
main_grading_period_weight,
main_category_id,
main_category_name,
main_category_weight,
course_group_name,
(((sum(student_grade_in_category)*main_grading_period_weight)/100)
+COALESCE((select grade/4 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
where category_id = 19 and gi.deleted_at is null
and gss.student_id = s.student_id and gss.course_id = s.course_id and gi.grading_period_id = s.main_grading_period_id),0)) as student_grade_in_main_grading_period,
academic_year_name  
from (SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    (total_grade*gs.main_category_weight)/total_max_grade as student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs

left join (SELECT 
student_id,
grading_period_id,
course_id,
course_name,
SUM(max_grade) AS total_max_grade,
SUM(grade) AS total_grade
FROM (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select * from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
ORDER BY s.student_id,grading_period_id, s.course_id, (s.grade*100)/max_grade DESC)s
)s
) ranked
WHERE ranked.rank <= (SELECT CEIL(COUNT(*) / 2) from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
where s.grading_period_id = ranked.grading_period_id
AND s.student_id = ranked.student_id AND s.course_id = ranked.course_id
GROUP BY s.student_id, s.course_id, s.grading_period_id
ORDER BY s.student_id,grading_period_id, s.course_id, s.grade DESC)
GROUP BY student_id, grading_period_id, course_id, course_name
ORDER BY student_id,grading_period_id, course_id
)q_grade on q_grade.course_id = gs.course_id and q_grade.student_id = gs.student_id and q_grade.grading_period_id = gs.main_grading_period_id
where main_category_id = 8 


union all 

SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs
where main_category_id != 8 
group by student_id, course_id,main_grading_period_id, main_category_id)s
group by student_id, course_id,main_grading_period_id
ORDER BY level_id,student_id, course_id, main_grading_period_id, main_category_id
) gs
inner join levels on levels.id = gs.level_id and (levels.level_code in ($P!{LEVEL_CODE}) OR $P{LEVEL_CODE}  = "-1")
inner join courses on courses.id = course_id and courses.calculated_in_total = 1 and courses.hide = 0
inner join students on students.id = gs.student_id and students.deleted_at is null and (gs.student_id in ($P!{STUDENT_ID}) OR $P{STUDENT_ID}  = "-1")
inner join users on users.actable_id = gs.student_id and users.actable_type = "student" and users.deleted_at is null and (users.id in ($P!{USER_ID}) OR  $P{USER_ID}   = "-1")

inner join (select a.student_name, a.student_id, a.course_id, a.course_name, 
(SELECT /*+ NO_BNL() */ grade as SECTION
  FROM scale_grades
  WHERE  SCALE_ID =    $P{LETTER_ID} and deleted_at is null
and  
round(sum((a.student_grade_in_main_grading_period)*100/a.main_grading_period_weight)/count(main_grading_period_id) ,0)
 between low and 
  case when high >= 100 THEN 1000000 else high - 0.5 end
  ) AS course_letter,
  sum((a.student_grade_in_main_grading_period)*100/a.main_grading_period_weight)/count(main_grading_period_id) as course_grade
from (select grades_summaries.*, levels.level_code
from (select 
student_id,
student_name, 
level_id,
level_name,   
course_id,
course_name,    
main_grading_period_id,
main_grading_period_name,  
main_grading_period_weight,
main_category_id,
main_category_name,
main_category_weight,
course_group_name,
(((sum(student_grade_in_category)*main_grading_period_weight)/100)
+COALESCE((select grade/4 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
where category_id = 19 and gi.deleted_at is null
and gss.student_id = s.student_id and gss.course_id = s.course_id and gi.grading_period_id = s.main_grading_period_id),0)) as student_grade_in_main_grading_period,
academic_year_name  
from (SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    (total_grade*gs.main_category_weight)/total_max_grade as student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs

left join (SELECT 
student_id,
grading_period_id,
course_id,
course_name,
SUM(max_grade) AS total_max_grade,
SUM(grade) AS total_grade
FROM (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select * from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
ORDER BY s.student_id,grading_period_id, s.course_id, (s.grade*100)/max_grade DESC)s
)s
) ranked
WHERE ranked.rank <= (SELECT CEIL(COUNT(*) / 2) from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
where s.grading_period_id = ranked.grading_period_id
AND s.student_id = ranked.student_id AND s.course_id = ranked.course_id
GROUP BY s.student_id, s.course_id, s.grading_period_id
ORDER BY s.student_id,grading_period_id, s.course_id, s.grade DESC)
GROUP BY student_id, grading_period_id, course_id, course_name
ORDER BY student_id,grading_period_id, course_id
)q_grade on q_grade.course_id = gs.course_id and q_grade.student_id = gs.student_id and q_grade.grading_period_id = gs.main_grading_period_id
where main_category_id = 8 


union all 

SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs
where main_category_id != 8 
group by student_id, course_id,main_grading_period_id, main_category_id)s
group by student_id, course_id,main_grading_period_id
ORDER BY level_id,student_id, course_id, main_grading_period_id, main_category_id
) grades_summaries
inner join levels on levels.id = level_id and (levels.level_code in ($P!{LEVEL_CODE}) OR $P{LEVEL_CODE}  = "-1")
inner join courses on courses.id = course_id and courses.calculated_in_total = 1 and courses.hide = 0 
inner join users on users.deleted_at is null and users.actable_id = grades_summaries.student_id and users.user_type = "student" and (users.id in ($P!{USER_ID}) OR  $P{USER_ID}   = "-1")
where (grades_summaries.student_id in ($P!{STUDENT_ID}) OR $P{STUDENT_ID}  = "-1")
and (levels.level_code in ($P!{LEVEL_CODE}) OR $P{LEVEL_CODE}  = "-1")
and (grades_summaries.main_grading_period_id in ($P!{MAIN_GRADING_PERIOD_ID}) OR $P{MAIN_GRADING_PERIOD_ID}  = "-1")
group by grades_summaries.student_id, grades_summaries.course_id, grades_summaries.main_grading_period_id )a
group by student_id, course_id)c on c.course_id = gs.course_id and c.student_id = gs.student_id

inner join (select a.student_name, a.student_id, 
(sum((a.student_grade_in_main_grading_period*100)/a.main_grading_period_weight)/count(distinct a.main_grading_period_id))/ count(distinct a.course_id) as year_avrg
from 
(select grades_summaries.*, levels.level_code from (select 
student_id,
student_name, 
level_id,
level_name,   
course_id,
course_name,    
main_grading_period_id,
main_grading_period_name,  
main_grading_period_weight,
main_category_id,
main_category_name,
main_category_weight,
course_group_name,
(((sum(student_grade_in_category)*main_grading_period_weight)/100)
+COALESCE((select grade/4 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
where category_id = 19 and gi.deleted_at is null
and gss.student_id = s.student_id and gss.course_id = s.course_id and gi.grading_period_id = s.main_grading_period_id),0)) as student_grade_in_main_grading_period,
academic_year_name  
from (SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    (total_grade*gs.main_category_weight)/total_max_grade as student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs

left join (SELECT 
student_id,
grading_period_id,
course_id,
course_name,
SUM(max_grade) AS total_max_grade,
SUM(grade) AS total_grade
FROM (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select 
student_id,
grading_period_id,
course_id,
course_name,
IF(student_status = 1, 0, max_grade) AS max_grade,
grade,
student_status,
@row_num := IF(@prev_student = s.student_id AND @prev_course = s.course_id, @row_num + 1, 1) AS rank,
@prev_student := s.student_id,
@prev_course := s.course_id,
@rownum := @rownum+1 from (select * from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
ORDER BY s.student_id,grading_period_id, s.course_id, (s.grade*100)/max_grade DESC)s
)s
) ranked
WHERE ranked.rank <= (SELECT CEIL(COUNT(*) / 2) from (select 
gss.student_id,
gi.grading_period_id, gp.name grading_period_name, 
gss.course_id,courses.name course_name,
IF(gss.student_status = 1, 0,gi.max_grade) max_grade, gss.grade, gss.student_status
 from grade_items gi
inner join grade_submissions gss on gss.grade_item_id = gi.id and gss.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where gi.deleted_at is null and category_id = 8

union all 

select 
qs.student_id,
quizzes.grading_period_id, gp.name grading_period_name, 
quizzes.course_id,courses.name course_name,
IF(qs.student_status = 1, 0,quizzes.total_score) max_grade, qs.score, qs.student_status
from quizzes 
inner join quiz_submissions qs on qs.quiz_id = quizzes.id and qs.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where category_id = 8 and quizzes.deleted_at is null

union all 

select 
ssa.student_id,
assi.grading_period_id, gp.name grading_period_name, 
assi.course_id,courses.name course_name,
IF(ssa.student_status = 1, 0,assi.points) max_grade, ssa.grade, ssa.student_status
 from assignments assi
inner join student_submitted_assignments ssa on ssa.assignment_id = assi.id and ssa.deleted_at is null
inner join grading_periods gp on gp.id = grading_period_id and gp.deleted_at is null
inner join courses on courses.id = course_id and courses.deleted_at is null
where assi.deleted_at is null and category_id = 8)s
where s.grading_period_id = ranked.grading_period_id
AND s.student_id = ranked.student_id AND s.course_id = ranked.course_id
GROUP BY s.student_id, s.course_id, s.grading_period_id
ORDER BY s.student_id,grading_period_id, s.course_id, s.grade DESC)
GROUP BY student_id, grading_period_id, course_id, course_name
ORDER BY student_id,grading_period_id, course_id
)q_grade on q_grade.course_id = gs.course_id and q_grade.student_id = gs.student_id and q_grade.grading_period_id = gs.main_grading_period_id
where main_category_id = 8 


union all 

SELECT 
    gs.student_id,
    gs.student_name,   
    gs.level_id,
    gs.level_name,
    gs.course_id,
    gs.course_name,    
    gs.main_grading_period_id,
	gs.main_grading_period_name,  
    gs.main_grading_period_weight,
    gs.main_category_id,
    gs.main_category_name,
    gs.main_category_weight,
    gs.course_group_name,
    student_grade_in_category,
    gs.student_grade_in_main_grading_period,    
    gs.academic_year_name  
FROM grades_summaries gs
where main_category_id != 8 
group by student_id, course_id,main_grading_period_id, main_category_id)s
group by student_id, course_id,main_grading_period_id
ORDER BY level_id,student_id, course_id, main_grading_period_id, main_category_id
) grades_summaries
inner join levels on levels.id = level_id and (levels.level_code in ($P!{LEVEL_CODE}) OR $P{LEVEL_CODE}  = "-1")
inner join courses on courses.id = course_id and courses.calculated_in_total = 1 and courses.hide = 0
inner join users on users.deleted_at is null and users.actable_id = grades_summaries.student_id and users.user_type = "student" and users.deleted_at is null and (users.id in ($P!{USER_ID}) OR  $P{USER_ID}   = "-1")
where (grades_summaries.student_id in ($P!{STUDENT_ID}) OR $P{STUDENT_ID}  = "-1")
and (levels.level_code in ($P!{LEVEL_CODE}) OR $P{LEVEL_CODE}  = "-1")
and (grades_summaries.main_grading_period_id in ($P!{MAIN_GRADING_PERIOD_ID}) OR $P{MAIN_GRADING_PERIOD_ID}  = "-1")
group by student_id, course_id, main_grading_period_id)a
group by a.student_id)k on k.student_id = gs.student_id
where (gs.main_grading_period_id in ($P!{MAIN_GRADING_PERIOD_ID}) OR $P{MAIN_GRADING_PERIOD_ID}  = "-1")
group by gs.student_id, gs.course_id, main_grading_period_id
order by gs.level_id, class, gs.student_name, gs.main_grading_period_name]]>
	</queryString>
	<field name="school_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="school_name"/>
	</field>
	<field name="student_id" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="student_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="users"/>
	</field>
	<field name="student_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="student_name"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="users"/>
	</field>
	<field name="level_id" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="level_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="levels"/>
	</field>
	<field name="level_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="level_name"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="levels"/>
	</field>
	<field name="level_code" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="level_code"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="levels"/>
	</field>
	<field name="class" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="class"/>
	</field>
	<field name="course_group_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="course_group_name"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
	</field>
	<field name="main_grading_period_id" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="main_grading_period_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
	</field>
	<field name="main_grading_period_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="main_grading_period_name"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
	</field>
	<field name="report_display_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="report_display_name"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="courses"/>
	</field>
	<field name="course_id" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="course_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="courses"/>
	</field>
	<field name="course_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="course_name"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="courses"/>
	</field>
	<field name="student_grade" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.label" value="student_grade"/>
	</field>
	<field name="academic_year_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="academic_year_name"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="grades_summaries"/>
	</field>
	<field name="period_letter" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="period_letter"/>
	</field>
	<field name="course_grade" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.label" value="course_grade"/>
	</field>
	<field name="course_letter" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="course_letter"/>
	</field>
	<field name="order" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="order"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="courses"/>
	</field>
	<field name="year_grade" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.label" value="year_grade"/>
	</field>
	<field name="year_letter" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="year_letter"/>
	</field>
	<sortField name="level_id"/>
	<sortField name="class"/>
	<sortField name="student_name"/>
	<sortField name="main_grading_period_name"/>
	<sortField name="order"/>
	<group name="ST_Group" isStartNewPage="true" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{student_id}]]></groupExpression>
		<groupHeader>
			<band height="183">
				<property name="com.jaspersoft.studio.unit.height" value="px"/>
				<frame>
					<reportElement x="0" y="103" width="865" height="60" uuid="575f5fc6-9110-486b-bcb2-afc1073bfc2b"/>
					<staticText>
						<reportElement mode="Opaque" x="0" y="0" width="100" height="30" backcolor="#E7E6E6" uuid="1bc32a03-1ab1-48f5-995f-199f8d634ef3"/>
						<box leftPadding="5">
							<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement textAlignment="Left" verticalAlignment="Middle">
							<font fontName="Arial" size="14" isBold="true"/>
						</textElement>
						<text><![CDATA[Student:]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="0" y="30" width="100" height="30" backcolor="#E7E6E6" uuid="2eb539a5-366c-4f9e-b11e-249e08e078fb"/>
						<box leftPadding="5">
							<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement textAlignment="Left" verticalAlignment="Middle">
							<font fontName="Arial" size="14" isBold="true"/>
						</textElement>
						<text><![CDATA[Grade:]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="480" y="0" width="250" height="30" backcolor="#E7E6E6" uuid="4f7885d6-3f01-4716-a9a5-c68080645ca5"/>
						<box leftPadding="5">
							<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement textAlignment="Left" verticalAlignment="Middle">
							<font fontName="Arial" size="14" isBold="true"/>
						</textElement>
						<text><![CDATA[Academic Year:]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="480" y="30" width="250" height="30" backcolor="#E7E6E6" uuid="94850ec1-f6a0-4ab8-b091-8883f5809616"/>
						<box leftPadding="5">
							<pen lineWidth="1.0" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Left" verticalAlignment="Middle">
							<font fontName="Arial" size="14" isBold="true"/>
						</textElement>
						<text><![CDATA[Academic Standing:]]></text>
					</staticText>
					<textField>
						<reportElement x="100" y="0" width="380" height="30" uuid="6524ebb5-b139-413d-8531-0da54fdf03a7"/>
						<box>
							<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement textAlignment="Center" verticalAlignment="Middle">
							<font fontName="Arial" size="14" isBold="false"/>
						</textElement>
						<textFieldExpression><![CDATA[$F{student_name}]]></textFieldExpression>
					</textField>
					<textField>
						<reportElement x="100" y="30" width="380" height="30" uuid="7cbe3377-0210-4680-abe2-76c4af7b1fc8"/>
						<box>
							<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement textAlignment="Center" verticalAlignment="Middle">
							<font fontName="Arial" size="14" isBold="false"/>
						</textElement>
						<textFieldExpression><![CDATA[$F{level_name}+" - "+$F{class}]]></textFieldExpression>
					</textField>
					<textField>
						<reportElement x="730" y="0" width="135" height="30" uuid="aebd99e6-dcae-4c12-9330-cd14d8fd2157"/>
						<box>
							<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement textAlignment="Center" verticalAlignment="Middle">
							<font fontName="Arial" size="14" isBold="false"/>
						</textElement>
						<textFieldExpression><![CDATA["2024 / 2025"]]></textFieldExpression>
					</textField>
					<textField>
						<reportElement x="730" y="30" width="135" height="30" uuid="11359c01-a939-4bd7-8846-30ab2cac005d"/>
						<box>
							<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement textAlignment="Center" verticalAlignment="Middle">
							<font fontName="Arial" size="14" isBold="false"/>
						</textElement>
						<textFieldExpression><![CDATA[$F{year_letter}]]></textFieldExpression>
					</textField>
				</frame>
				<textField>
					<reportElement x="0" y="0" width="865" height="40" uuid="5ddf9602-841d-4176-84c1-89cbbdeb0c51"/>
					<textElement textAlignment="Right" verticalAlignment="Bottom">
						<font fontName="Arial" size="19" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{school_name}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="0" y="43" width="865" height="40" uuid="75ba57f6-318d-4761-b0f8-b15c22e97480"/>
					<textElement textAlignment="Right" verticalAlignment="Top">
						<font fontName="Arial" size="19" isBold="true"/>
					</textElement>
					<text><![CDATA[American Devision]]></text>
				</staticText>
				<image>
					<reportElement x="0" y="0" width="83" height="83" uuid="9d34048f-2e04-42d7-b222-e47e0ae0e3e6">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
					</reportElement>
					<imageExpression><![CDATA[$P{ABSOLUTE_PATH}+"Gems.jpg"]]></imageExpression>
				</image>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="81">
				<crosstab horizontalPosition="Left">
					<reportElement x="0" y="0" width="610" height="61" uuid="6d52e1a8-6eb0-4b60-9070-07f46d0aa843">
						<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.VerticalRowLayout"/>
						<property name="com.jaspersoft.studio.crosstab.style.header" value="Crosstab 3_CH"/>
						<property name="com.jaspersoft.studio.crosstab.style.group" value="Crosstab 3_CG"/>
						<property name="com.jaspersoft.studio.crosstab.style.total" value="Crosstab 3_CT"/>
						<property name="com.jaspersoft.studio.crosstab.style.detail" value="Crosstab 3_CD"/>
					</reportElement>
					<box>
						<pen lineWidth="1.75"/>
					</box>
					<crosstabDataset>
						<dataset resetType="Group" resetGroup="ST_Group"/>
					</crosstabDataset>
					<crosstabHeaderCell>
						<cellContents>
							<staticText>
								<reportElement mode="Opaque" x="0" y="0" width="140" height="20" forecolor="#000000" backcolor="#E7E6E6" uuid="05577783-0c66-4ad9-9fbc-14224d5aa28c"/>
								<box>
									<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								</box>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Subject]]></text>
							</staticText>
						</cellContents>
					</crosstabHeaderCell>
					<rowGroup name="course_name" width="140" totalPosition="End">
						<bucket order="None" class="java.lang.String">
							<bucketExpression><![CDATA[IF($F{report_display_name}== null,$F{course_name}.split( "\\(" )[0],$F{report_display_name})]]></bucketExpression>
						</bucket>
						<crosstabRowHeader>
							<cellContents mode="Opaque" style="Crosstab 3_CH">
								<textField>
									<reportElement mode="Opaque" x="0" y="0" width="140" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="0a5c112f-dfae-4273-a59c-4ce33a13fe10"/>
									<box>
										<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									</box>
									<textElement textAlignment="Center" verticalAlignment="Middle">
										<font fontName="Arial" isBold="true"/>
									</textElement>
									<textFieldExpression><![CDATA[$V{course_name}]]></textFieldExpression>
								</textField>
							</cellContents>
						</crosstabRowHeader>
						<crosstabTotalRowHeader>
							<cellContents mode="Opaque" style="Crosstab 3_CT">
								<staticText>
									<reportElement mode="Opaque" x="0" y="0" width="140" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="7dac2b8e-9aa7-41bc-a09b-1eff9b903e4a"/>
									<box>
										<pen lineWidth="1.75"/>
									</box>
									<textElement textAlignment="Center" verticalAlignment="Middle">
										<font fontName="Arial" isBold="true"/>
									</textElement>
									<text><![CDATA[Average]]></text>
								</staticText>
							</cellContents>
						</crosstabTotalRowHeader>
					</rowGroup>
					<columnGroup name="main_grading_period_name" height="20" totalPosition="End">
						<bucket class="java.lang.String">
							<bucketExpression><![CDATA[$F{main_grading_period_name}]]></bucketExpression>
						</bucket>
						<crosstabColumnHeader>
							<cellContents mode="Opaque" style="Crosstab 3_CH">
								<textField>
									<reportElement mode="Opaque" x="0" y="0" width="60" height="20" forecolor="#000000" backcolor="#E7E6E6" uuid="f989c92b-7d39-44cc-83a8-4432df6f300d"/>
									<box>
										<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									</box>
									<textElement textAlignment="Center" verticalAlignment="Middle">
										<font fontName="Arial" size="12" isBold="true"/>
									</textElement>
									<textFieldExpression><![CDATA[$V{main_grading_period_name}]]></textFieldExpression>
								</textField>
							</cellContents>
						</crosstabColumnHeader>
						<crosstabTotalColumnHeader>
							<cellContents mode="Opaque" style="Crosstab 3_CT">
								<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.HorizontalRowLayout"/>
								<property name="com.jaspersoft.studio.unit.width" value="px"/>
								<staticText>
									<reportElement mode="Opaque" x="0" y="0" width="70" height="20" forecolor="#000000" backcolor="#E7E6E6" uuid="ad86e71d-25e7-4d6e-9f8a-8b5c2b3ac067"/>
									<box>
										<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									</box>
									<textElement textAlignment="Center" verticalAlignment="Middle">
										<font fontName="Arial" size="12" isBold="true"/>
									</textElement>
									<text><![CDATA[Total]]></text>
								</staticText>
								<staticText>
									<reportElement mode="Opaque" x="70" y="0" width="70" height="20" forecolor="#000000" backcolor="#E7E6E6" uuid="ad9c080f-1fae-43c2-b082-64d2826d227d"/>
									<box>
										<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									</box>
									<textElement textAlignment="Center" verticalAlignment="Middle">
										<font fontName="Arial" size="12" isBold="true"/>
									</textElement>
									<text><![CDATA[Grade]]></text>
								</staticText>
							</cellContents>
						</crosstabTotalColumnHeader>
					</columnGroup>
					<measure name="student_grade_in_main_grading_period_MEASURE" class="java.lang.Float" calculation="Sum">
						<measureExpression><![CDATA[IF(Math.round($F{student_grade})>100,100,Math.round($F{student_grade}))]]></measureExpression>
					</measure>
					<measure name="LETTER" class="java.lang.String">
						<measureExpression><![CDATA[$F{period_letter}]]></measureExpression>
					</measure>
					<measure name="year_LETTER" class="java.lang.String">
						<measureExpression><![CDATA[$F{year_letter}]]></measureExpression>
					</measure>
					<measure name="course_id" class="java.lang.Integer" calculation="DistinctCount">
						<measureExpression><![CDATA[$F{course_id}]]></measureExpression>
					</measure>
					<measure name="main_grading_period_id" class="java.lang.Integer" calculation="DistinctCount">
						<measureExpression><![CDATA[$F{main_grading_period_id}]]></measureExpression>
					</measure>
					<measure name="course_letter" class="java.lang.String">
						<measureExpression><![CDATA[$F{course_letter}]]></measureExpression>
					</measure>
					<measure name="course_grade" class="java.lang.Double">
						<measureExpression><![CDATA[$F{course_grade}]]></measureExpression>
					</measure>
					<measure name="round(a.year_avrg,0)" class="java.lang.Double">
						<measureExpression><![CDATA[$F{year_grade}]]></measureExpression>
					</measure>
					<measure name="year_avrg" class="java.lang.Double">
						<measureExpression><![CDATA[IF($F{year_grade}>100,100.00,$F{year_grade})]]></measureExpression>
					</measure>
					<crosstabCell width="60" height="20">
						<cellContents mode="Opaque" style="Crosstab 3_CD">
							<textField pattern="#,##0" isBlankWhenNull="true">
								<reportElement mode="Opaque" x="0" y="0" width="60" height="20" forecolor="#000000" uuid="1c7ffc35-a8e2-40e3-942a-1a8111a365bc"/>
								<box>
									<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								</box>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{student_grade_in_main_grading_period_MEASURE}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabCell>
					<crosstabCell width="140" height="20" columnTotalGroup="main_grading_period_name">
						<cellContents mode="Opaque" style="Crosstab 3_CT">
							<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.HorizontalRowLayout"/>
							<textField pattern="##" isBlankWhenNull="true">
								<reportElement mode="Opaque" x="0" y="0" width="70" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="4a4550a9-74f2-465b-a066-9cbc5e8f9d3f"/>
								<box>
									<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								</box>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial"/>
								</textElement>
								<textFieldExpression><![CDATA[Math.round($V{student_grade_in_main_grading_period_MEASURE}/$V{main_grading_period_id})]]></textFieldExpression>
							</textField>
							<textField pattern="#,##0.0##;(#,##0.0##-)" isBlankWhenNull="true">
								<reportElement mode="Opaque" x="70" y="0" width="70" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="e1461af2-8c01-43ab-a235-1cca039e08aa"/>
								<box>
									<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								</box>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial"/>
								</textElement>
								<textFieldExpression><![CDATA[Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) < 59.5 ? "F" :
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 59.5 + 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) < 62.5 ? "D-" :
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 62.5 + 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) < 66.5 ? "D" :
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 66.5 + 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) < 69.5 ? "D+" :
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 69.5 + 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) < 72.5 ? "C-" :
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 72.5 + 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) < 76.5 ? "C" :
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 76.5 + 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) < 79.5 ? "C+" :
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 79.5 + 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) < 82.5 ? "B-" :
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 82.5 + 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) < 86.5 ? "B" :
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 86.5 + 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) < 89.5 ? "B+" :
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 89.5 + 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) < 92.5 ? "A-" :
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) >= 92.5 + 0.5 && 
Math.round($V{student_grade_in_main_grading_period_MEASURE} / $V{main_grading_period_id}) <= 100 ? "A" :
"Invalid Score"
]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabCell>
					<crosstabCell width="60" height="20" rowTotalGroup="course_name">
						<cellContents mode="Opaque" style="Crosstab 3_CT">
							<textField pattern="#,##0" isBlankWhenNull="true">
								<reportElement mode="Opaque" x="0" y="0" width="60" height="20" forecolor="#000000" uuid="29fe1101-c856-4e24-ba60-2222ea2115a5"/>
								<box>
									<pen lineWidth="1.75"/>
								</box>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" isBold="true"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{student_grade_in_main_grading_period_MEASURE}/$V{course_id}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabCell>
					<crosstabCell width="140" height="20" rowTotalGroup="course_name" columnTotalGroup="main_grading_period_name">
						<cellContents mode="Opaque" style="Crosstab 3_CT">
							<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.HorizontalRowLayout"/>
							<textField pattern="##" isBlankWhenNull="true">
								<reportElement mode="Opaque" x="0" y="0" width="70" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="08e79f58-754d-4567-8e60-e1d97ef61a6d"/>
								<box>
									<pen lineWidth="1.75"/>
								</box>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" isBold="true"/>
								</textElement>
								<textFieldExpression><![CDATA[Math.round($V{year_avrg})]]></textFieldExpression>
							</textField>
							<textField pattern="#,##0.0##;(#,##0.0##-)" isBlankWhenNull="true">
								<reportElement mode="Opaque" x="70" y="0" width="70" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="e51bda26-ccc9-4c8b-bda8-c33803a80c22"/>
								<box>
									<pen lineWidth="1.75"/>
								</box>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" isBold="true"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{year_LETTER}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabCell>
				</crosstab>
				<crosstab horizontalPosition="Center">
					<reportElement x="610" y="0" width="255" height="40" uuid="e774e8db-6749-4c62-8526-dad87a046616">
						<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.VerticalRowLayout"/>
						<property name="com.jaspersoft.studio.crosstab.style.header" value="Crosstab 2_CH"/>
						<property name="com.jaspersoft.studio.crosstab.style.group" value="Crosstab 2_CG"/>
						<property name="com.jaspersoft.studio.crosstab.style.total" value="Crosstab 2_CT"/>
						<property name="com.jaspersoft.studio.crosstab.style.detail" value="Crosstab 2_CD"/>
					</reportElement>
					<crosstabDataset>
						<dataset>
							<datasetRun subDataset="category_grade" uuid="c274bbdb-c067-4687-adab-d78c65a9f8fd">
								<datasetParameter name="student_id">
									<datasetParameterExpression><![CDATA[$F{student_id}]]></datasetParameterExpression>
								</datasetParameter>
								<datasetParameter name="MAIN_GRADING_PERIOD_ID">
									<datasetParameterExpression><![CDATA[$P{MAIN_GRADING_PERIOD_ID}]]></datasetParameterExpression>
								</datasetParameter>
								<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
							</datasetRun>
						</dataset>
					</crosstabDataset>
					<crosstabHeaderCell>
						<cellContents>
							<property name="com.jaspersoft.studio.unit.width" value="px"/>
							<staticText>
								<reportElement mode="Opaque" x="0" y="0" width="140" height="20" backcolor="#E7E6E6" uuid="556f3a27-aae1-48bd-a254-ed88f094018f"/>
								<box>
									<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								</box>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Subject]]></text>
							</staticText>
						</cellContents>
					</crosstabHeaderCell>
					<rowGroup name="course_name" width="140">
						<bucket class="java.lang.String">
							<bucketExpression><![CDATA[$F{course_name1}]]></bucketExpression>
						</bucket>
						<crosstabRowHeader>
							<cellContents mode="Opaque" style="Crosstab 2_CH">
								<textField>
									<reportElement mode="Opaque" x="0" y="0" width="140" height="20" uuid="8ccf792b-9bd9-4952-b0a7-fcff1488ade4"/>
									<box>
										<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									</box>
									<textElement textAlignment="Center" verticalAlignment="Middle"/>
									<textFieldExpression><![CDATA[$V{course_name}]]></textFieldExpression>
								</textField>
							</cellContents>
						</crosstabRowHeader>
						<crosstabTotalRowHeader>
							<cellContents mode="Opaque" style="Crosstab 2_CT">
								<staticText>
									<reportElement x="0" y="0" width="60" height="20" forecolor="#FFFFFF" uuid="6ba9c69e-0343-43e3-8c96-fed45c65666a"/>
									<text><![CDATA[Total course_name]]></text>
								</staticText>
							</cellContents>
						</crosstabTotalRowHeader>
					</rowGroup>
					<columnGroup name="student_id" height="20">
						<bucket class="java.lang.Integer">
							<bucketExpression><![CDATA[$F{student_id}]]></bucketExpression>
						</bucket>
						<crosstabColumnHeader>
							<cellContents mode="Opaque" style="Crosstab 2_CH">
								<textField>
									<reportElement mode="Opaque" x="0" y="0" width="60" height="20" backcolor="#E7E6E6" uuid="0ce87bf3-a583-4d79-9c54-18760fbdb72c"/>
									<box>
										<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
										<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									</box>
									<textElement textAlignment="Center" verticalAlignment="Middle">
										<font size="12" isBold="true"/>
									</textElement>
									<textFieldExpression><![CDATA["Mark"]]></textFieldExpression>
								</textField>
							</cellContents>
						</crosstabColumnHeader>
						<crosstabTotalColumnHeader>
							<cellContents mode="Opaque" style="Crosstab 2_CT">
								<staticText>
									<reportElement x="0" y="0" width="60" height="20" forecolor="#FFFFFF" uuid="42d3e546-1b29-48b8-8ae9-eb16efdf151c"/>
									<text><![CDATA[Total student_id]]></text>
								</staticText>
							</cellContents>
						</crosstabTotalColumnHeader>
					</columnGroup>
					<measure name="emo_grade_MEASURE" class="java.lang.Double">
						<measureExpression><![CDATA[$F{emo_grade}]]></measureExpression>
					</measure>
					<measure name="total_grade" class="java.lang.Integer">
						<measureExpression><![CDATA[$F{total_grade}]]></measureExpression>
					</measure>
					<crosstabCell width="60" height="20">
						<cellContents mode="Opaque" style="Crosstab 2_CD">
							<textField>
								<reportElement mode="Opaque" x="0" y="0" width="60" height="20" uuid="f1082d01-bd38-4f4d-b56e-4ffb069bc2b6"/>
								<box>
									<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
									<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								</box>
								<textElement textAlignment="Center" verticalAlignment="Middle"/>
								<textFieldExpression><![CDATA[$V{emo_grade_MEASURE} + " / " + $V{total_grade}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabCell>
				</crosstab>
			</band>
			<band height="440">
				<stackedBarChart>
					<chart evaluationTime="Group" evaluationGroup="ST_Group">
						<reportElement positionType="Float" x="54" y="20" width="356" height="200" uuid="094ee97f-0772-42f9-b046-1dfcbbf570d6">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<property name="com.jaspersoft.studio.unit.width" value="px"/>
						</reportElement>
						<chartTitle position="Top">
							<font size="14"/>
							<titleExpression><![CDATA["Student Average vs." + "\n" + "School Average"]]></titleExpression>
						</chartTitle>
						<chartSubtitle/>
						<chartLegend position="Right"/>
					</chart>
					<categoryDataset>
						<dataset>
							<datasetRun subDataset="char2" uuid="c9e59940-d91b-4873-b09b-6ff1f68dfe4f">
								<datasetParameter name="LEVEL_CODE">
									<datasetParameterExpression><![CDATA[$F{level_code}]]></datasetParameterExpression>
								</datasetParameter>
								<datasetParameter name="STUDENT_ID">
									<datasetParameterExpression><![CDATA[$F{student_id}]]></datasetParameterExpression>
								</datasetParameter>
								<datasetParameter name="MAIN_GRADING_PERIOD_ID">
									<datasetParameterExpression><![CDATA[$P{MAIN_GRADING_PERIOD_ID}]]></datasetParameterExpression>
								</datasetParameter>
							</datasetRun>
						</dataset>
						<categorySeries>
							<seriesExpression><![CDATA[$F{average_type}]]></seriesExpression>
							<categoryExpression><![CDATA[$F{average_type}]]></categoryExpression>
							<valueExpression><![CDATA[IF(Math.round($F{avrerage})>100,100,Math.round($F{avrerage}))]]></valueExpression>
						</categorySeries>
					</categoryDataset>
					<barPlot isShowLabels="true">
						<plot>
							<seriesColor seriesOrder="0" color="#B10501"/>
							<seriesColor seriesOrder="1" color="#BDC0C9"/>
						</plot>
						<itemLabel/>
						<categoryAxisFormat>
							<axisFormat labelColor="#000000" tickLabelColor="#000000" axisLineColor="#000000"/>
						</categoryAxisFormat>
						<valueAxisFormat>
							<axisFormat labelColor="#000000" tickLabelColor="#000000" axisLineColor="#000000"/>
						</valueAxisFormat>
						<rangeAxisMaxValueExpression><![CDATA[100]]></rangeAxisMaxValueExpression>
					</barPlot>
				</stackedBarChart>
				<stackedBarChart>
					<chart evaluationTime="Group" evaluationGroup="ST_Group">
						<reportElement key="" positionType="Float" x="430" y="20" width="381" height="200" uuid="b19ca2a7-8376-4b47-9d7f-58112713bf71">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<property name="com.jaspersoft.studio.unit.width" value="px"/>
						</reportElement>
						<chartTitle>
							<font size="14"/>
							<titleExpression><![CDATA["Quarterly Average"]]></titleExpression>
						</chartTitle>
						<chartSubtitle/>
						<chartLegend position="Right"/>
					</chart>
					<categoryDataset>
						<dataset>
							<datasetRun subDataset="chart1" uuid="c1a6f480-ad49-4208-8366-5da46c3b40b8">
								<datasetParameter name="student_id">
									<datasetParameterExpression><![CDATA[$F{student_id}]]></datasetParameterExpression>
								</datasetParameter>
								<datasetParameter name="LEVEL_CODE">
									<datasetParameterExpression><![CDATA[$F{level_code}]]></datasetParameterExpression>
								</datasetParameter>
								<datasetParameter name="MAIN_GRADING_PERIOD_ID">
									<datasetParameterExpression><![CDATA[$P{MAIN_GRADING_PERIOD_ID}]]></datasetParameterExpression>
								</datasetParameter>
							</datasetRun>
						</dataset>
						<categorySeries>
							<seriesExpression><![CDATA[$F{main_grading_period_name}]]></seriesExpression>
							<categoryExpression><![CDATA[$F{main_grading_period_name}]]></categoryExpression>
							<valueExpression><![CDATA[IF(Math.round($F{total_quarter})>100,100,Math.round($F{total_quarter}))]]></valueExpression>
						</categorySeries>
					</categoryDataset>
					<barPlot isShowLabels="true">
						<plot foregroundAlpha="1.0">
							<seriesColor seriesOrder="0" color="#121F42"/>
							<seriesColor seriesOrder="1" color="#B10501"/>
							<seriesColor seriesOrder="2" color="#BDC0C9"/>
							<seriesColor seriesOrder="3" color="#006A1F"/>
						</plot>
						<itemLabel/>
						<categoryAxisFormat>
							<axisFormat labelColor="#000000" tickLabelColor="#000000" verticalTickLabels="false" axisLineColor="#000000"/>
						</categoryAxisFormat>
						<valueAxisFormat>
							<axisFormat labelColor="#000000" tickLabelColor="#000000" verticalTickLabels="true" axisLineColor="#000000"/>
						</valueAxisFormat>
						<rangeAxisMaxValueExpression><![CDATA[100]]></rangeAxisMaxValueExpression>
					</barPlot>
				</stackedBarChart>
				<barChart>
					<chart evaluationTime="Group" evaluationGroup="ST_Group">
						<reportElement x="0" y="240" width="865" height="200" uuid="27d99029-b930-408f-be99-98f4e46a1305"/>
						<chartTitle>
							<font size="14"/>
							<titleExpression><![CDATA["Subject Per Quarter Average"]]></titleExpression>
						</chartTitle>
						<chartSubtitle/>
						<chartLegend position="Right"/>
					</chart>
					<categoryDataset>
						<dataset resetType="Group" resetGroup="ST_Group"/>
						<categorySeries>
							<seriesExpression><![CDATA[$F{main_grading_period_name}]]></seriesExpression>
							<categoryExpression><![CDATA[IF($F{report_display_name}== null,$F{course_name}.split( "\\(" )[0],$F{report_display_name})]]></categoryExpression>
							<valueExpression><![CDATA[$F{student_grade}]]></valueExpression>
						</categorySeries>
					</categoryDataset>
					<barPlot>
						<plot labelRotation="45.0">
							<seriesColor seriesOrder="0" color="#121F42"/>
							<seriesColor seriesOrder="1" color="#B10501"/>
							<seriesColor seriesOrder="2" color="#BDC0C9"/>
							<seriesColor seriesOrder="3" color="#006A1F"/>
						</plot>
						<itemLabel/>
						<categoryAxisFormat labelRotation="45.0">
							<axisFormat labelColor="#000000" tickLabelColor="#000000" axisLineColor="#000000">
								<tickLabelFont>
									<font size="8"/>
								</tickLabelFont>
							</axisFormat>
						</categoryAxisFormat>
						<valueAxisFormat>
							<axisFormat labelColor="#000000" tickLabelColor="#000000" axisLineColor="#000000"/>
						</valueAxisFormat>
						<rangeAxisMaxValueExpression><![CDATA[100]]></rangeAxisMaxValueExpression>
					</barPlot>
				</barChart>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band splitType="Stretch"/>
	</detail>
	<pageFooter>
		<band height="146" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<componentElement>
				<reportElement positionType="Float" x="738" y="20" width="113" height="96" uuid="17aa92ec-89a1-4b47-96a9-10cc710e2b7d"/>
				<jr:QRCode xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<jr:codeExpression><![CDATA["Student Name: "+$F{student_name}
+"\n"+
"Level code:: "+$F{level_code}
+"\n"+
"Class Name: "+$F{course_group_name}
+"\n"+
"Generation Date: "+NOW( )]]></jr:codeExpression>
				</jr:QRCode>
			</componentElement>
			<staticText>
				<reportElement x="721" y="116" width="72" height="30" uuid="932909e3-9224-4ca2-9b81-57f53f857fca"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="12"/>
				</textElement>
				<text><![CDATA[Powered by]]></text>
			</staticText>
			<staticText>
				<reportElement x="793" y="116" width="72" height="30" forecolor="#60DC88" uuid="b65a5ecd-3740-4cc3-ada8-d2cf61bc2cbf"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[ Skolera]]></text>
			</staticText>
		</band>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
